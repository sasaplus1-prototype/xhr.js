/*!
 * @license xhr.js Copyright(c) 2016 sasa+1
 * https://github.com/sasaplus1-prototype/xhr.js
 * Released under the MIT license.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xhr=e():t.xhr=e()}(this,function(){return function(t){function e(r){if(o[r])return o[r].exports;var n=o[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e){"use strict";function o(){this._limit=0,this._uri="",this._method="",this._headers={}}function r(t){return t>=200&&t<300||304===t||1223===t||0===t}function n(t){var e,o,r=[];for(e in t)s.call(t,e)&&(o=t[e],r.push(encodeURIComponent(e)+"="+encodeURIComponent(o)));return r.join("&").replace(/%20/g,"+")}function i(){return new o}var s=Object.prototype.hasOwnProperty;o.prototype.get=function(t){return this._uri=t,this._method="GET",this},o.prototype.post=function(t){return this._uri=t,this._method="POST",this},o.prototype.timeout=function(t){return this._limit=t,this},o.prototype.set=function(t,e){return this._headers[t]=e,this},o.prototype.end=function(t,e){var o,i,u,p=this;if("undefined"!=typeof e){if("undefined"==typeof Promise)throw new TypeError("callback must be a Function");return new Promise(function(e,o){p.end(t,function(t,r){t?o({err:t,statusText:r.statusText,xhr:r}):e({responseText:r.responseText,xhr:r})})})}o=new XMLHttpRequest,o.onreadystatechange=function(){4===o.readyState&&(clearTimeout(u),r(o.status)?e(null,o.responseText,o):e(new Error("request failed"),o.statusText,o))},o.open(p._method,p._uri);for(i in p._headers)s.call(p._headers,i)&&o.setRequestHeader(i,p._headers[i]);o.send(null!==t&&"object"==typeof t?n(t):t),isFinite(p._limit)&&p._limit>0&&(u=setTimeout(function(){e(new Error("timeout"),o.statusText,o),o.abort()},p._limit))},t.exports={request:i}}])});